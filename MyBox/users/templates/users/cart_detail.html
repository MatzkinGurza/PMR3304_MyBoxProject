{% extends 'base.html' %}

{% block content %}
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #1c1c1c;
    color: white;
    margin: 0;
    padding: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

th, td {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #444;
}

th {
    font-weight: bold;
    text-transform: uppercase;
}

td img {
    width: 50px;
    height: 50px;
}

.quantity-container {
    display: flex;
    align-items: center;
    justify-content: center;
}

.quantity-container button {
    background-color: #333;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    font-size: 16px;
}

.quantity-container input {
    width: 50px;
    text-align: center;
    margin: 0 5px;
    border: 1px solid #333;
    background-color: #1c1c1c;
    color: white;
}

.summary {
    width: 100%;
    border-top: 1px solid #444;
    margin-top: 20px;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
}

.summary-row.total {
    font-size: 20px;
    font-weight: bold;
}

.button-group {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

.button-group button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
}

.button-group input {
    width: 150px;
    padding: 10px;
    margin-right: 10px;
    border: 1px solid #333;
    background-color: #1c1c1c;
    color: white;
}
</style>
<body>
    <h1>Carrinho de Compras</h1>
        {% if cart_items %}
        <form method="post" action="{% url 'users:create_payment' %}">
            {% csrf_token %}
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>Produto</th>
                    <th>Preço Unitário</th>
                    <th>Quantidade</th>
                    <th>Preço Total</th>
                    <th>Selecionar</th>
                </tr>
            </thead>
            <tbody>
                {% for item in cart_items %}
                    <tr>
                        <td><form method="post" action="{% url 'users:delete_item' item.id %}">
                            {% csrf_token %}
                            <button style="background:none; border:none; color:red; cursor:pointer;">✖</button>
                        </form></td>
                        <td>{{ item.box.name }}</td>
                        <td>R$ {{ item.box.price }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>R$ {{ item.total_price }}</td>
                        <td><!--<form method="post" action="{% url 'users:create_payment' %}">-->
                            <!--{% csrf_token %}-->
                            <input type="radio" name="selected_box" value="{{ item.id }}" required> 
                     <!--    </form>--></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <p><strong>Subtotal:</strong> R$ {{ total_price }}</p>
    <div class="button-group">
        <!--<form method="post" action="{% url 'users:create_payment' %}">-->
           <!-- {% csrf_token %}-->
            <!--<button>Realizar Compra</button>-->
                <div class="pay-container">
                {{ form.as_p }}
                <!-- Botão de Submissão -->
                <button type="submit" class="btn btn-primary">Pagar</button>
                </div>
        </form>
    </div>
    {% else %}
        <p>Seu carrinho está vazio.</p>
    {% endif %}
</body>
{% endblock %}
